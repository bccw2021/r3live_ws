<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R3LIVE vs DROID-SLAM æ ¸å¿ƒåŸç†å¯è§†åŒ–</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --accent: #9b59b6;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --danger: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--dark), var(--primary));
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            background: white;
            border-radius: 50px;
            padding: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .tab-btn {
            padding: 12px 30px;
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 25px;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }
        
        .card-title {
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        .visualization-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .math-formula {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }
        
        .diagram {
            flex: 1;
            min-width: 300px;
            height: 300px;
            background: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .sensor {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .point-cloud {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .point {
            position: absolute;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0.7;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .comparison-table th, 
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .comparison-table th {
            background: var(--dark);
            color: white;
            font-weight: 600;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .comparison-table tr:hover {
            background-color: #e9f7fe;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #777;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .visualization-container {
                flex-direction: column;
            }
            
            .tabs {
                flex-direction: column;
                border-radius: 10px;
            }
            
            .tab-btn {
                width: 100%;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>R3LIVE ä¸ DROID-SLAM æ ¸å¿ƒåŸç†å¯è§†åŒ–</h1>
            <p class="subtitle">LiDAR-æƒ¯æ€§-è§†è§‰ç´§è€¦åˆ vs æ·±åº¦å­¦ä¹ å¯†é›†å…‰æµSLAMç³»ç»Ÿ</p>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="r3live">R3LIVE</button>
            <button class="tab-btn" data-tab="droidslam">DROID-SLAM</button>
            <button class="tab-btn" data-tab="comparison">å¯¹æ¯”åˆ†æ</button>
        </div>
        
        <!-- R3LIVE Content -->
        <div id="r3live" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">L</div>
                    <h2 class="card-title">ç³»ç»Ÿæ¶æ„ï¼šLiDAR-æƒ¯æ€§-è§†è§‰ç´§è€¦åˆ</h2>
                </div>
                <p>R3LIVEé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼ŒåŒ…å«ä¸¤ä¸ªä¸»è¦å­ç³»ç»Ÿï¼š</p>
                <ul>
                    <li><strong>LIOå­ç³»ç»Ÿ</strong>ï¼šåˆ©ç”¨LiDARå’ŒIMUæ•°æ®æ„å»ºç¯å¢ƒçš„å‡ ä½•ç»“æ„ï¼ˆç‚¹äº‘åœ°å›¾ï¼‰</li>
                    <li><strong>VIOå­ç³»ç»Ÿ</strong>ï¼šåˆ©ç”¨ç›¸æœºå’ŒIMUæ•°æ®ä¸ºåœ°å›¾æ·»åŠ çº¹ç†ï¼ˆé¢œè‰²ä¿¡æ¯ï¼‰</li>
                </ul>
                
                <div class="visualization-container">
                    <div class="diagram" id="r3live-architecture">
                        <!-- Architecture visualization will be rendered here -->
                    </div>
                    <div class="math-formula">
                        <h3>çŠ¶æ€å‘é‡è¡¨ç¤º</h3>
                        <p>\[
                        \mathbf{x} = \left[ \mathbf{p}, \mathbf{R}, \mathbf{v}, \mathbf{b}_g, \mathbf{b}_a, \mathbf{p}_{LtoI}, \mathbf{R}_{LtoI}, \mathbf{p}_{ItoC}, \mathbf{R}_{ItoC} \right]^T
                        \]</p>
                        <p>åŒ…å«ï¼šIMUä½å§¿(p,R)ã€é€Ÿåº¦(v)ã€IMUåç½®(bg,ba)ã€LiDARå¤–å‚(p<sub>LtoI</sub>,R<sub>LtoI</sub>)ã€ç›¸æœºå¤–å‚(p<sub>ItoC</sub>,R<sub>ItoC</sub>)</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">I</div>
                    <h2 class="card-title">IMUé¢„ç§¯åˆ†ä¸çŠ¶æ€ä¼ æ’­</h2>
                </div>
                <p>åˆ©ç”¨IMUæ•°æ®è¿›è¡Œé«˜é¢‘çŠ¶æ€é¢„æµ‹ï¼ˆä¼ æ’­ï¼‰ï¼š</p>
                
                <div class="visualization-container">
                    <div class="math-formula">
                        <h3>R3LIVEè¯¯å·®çŠ¶æ€è¿­ä»£å¡å°”æ›¼æ»¤æ³¢å™¨(ESIKF)</h3>
                        
                        <h4>1. çŠ¶æ€å‘é‡å®šä¹‰</h4>
                        <p>\[
                        \mathbf{x} = [\mathbf{p}^T, \mathbf{v}^T, \mathbf{q}^T, \mathbf{b}_a^T, \mathbf{b}_g^T, \mathbf{p}_{LI}^T, \mathbf{q}_{LI}^T, \mathbf{p}_{IC}^T, \mathbf{q}_{IC}^T]^T
                        \]</p>
                        <p>åŒ…æ‹¬ï¼šä½ç½®ã€é€Ÿåº¦ã€å››å…ƒæ•°ã€IMUåç½®ã€LiDAR-IMUå¤–å‚ã€ç›¸æœº-IMUå¤–å‚</p>
                        
                        <h4>2. è¿ç»­æ—¶é—´è¿åŠ¨å­¦æ¨¡å‹</h4>
                        <p>\[
                        \begin{align}
                        \dot{\mathbf{p}} &= \mathbf{v} \\
                        \dot{\mathbf{v}} &= \mathbf{R}(\mathbf{a}_m - \mathbf{b}_a - \mathbf{n}_a) + \mathbf{g} \\
                        \dot{\mathbf{q}} &= \frac{1}{2}\mathbf{q} \otimes [0, (\boldsymbol{\omega}_m - \mathbf{b}_g - \mathbf{n}_g)^T]^T \\
                        \dot{\mathbf{b}}_a &= \mathbf{n}_{ba}, \quad \dot{\mathbf{b}}_g = \mathbf{n}_{bg}
                        \end{align}
                        \]</p>
                        
                        <h4>3. è¯¯å·®çŠ¶æ€ä¼ æ’­</h4>
                        <p>\[
                        \begin{align}
                        \delta\dot{\mathbf{p}} &= \delta\mathbf{v} \\
                        \delta\dot{\mathbf{v}} &= -\mathbf{R}[\mathbf{a}_m - \mathbf{b}_a]_{\times}\delta\boldsymbol{\theta} - \mathbf{R}\delta\mathbf{b}_a - \mathbf{R}\mathbf{n}_a \\
                        \delta\dot{\boldsymbol{\theta}} &= -[\boldsymbol{\omega}_m - \mathbf{b}_g]_{\times}\delta\boldsymbol{\theta} - \delta\mathbf{b}_g - \mathbf{n}_g \\
                        \delta\dot{\mathbf{b}}_a &= \mathbf{n}_{ba}, \quad \delta\dot{\mathbf{b}}_g = \mathbf{n}_{bg}
                        \end{align}
                        \]</p>
                        
                        <h4>4. ç¦»æ•£åŒ–é›…å¯æ¯”çŸ©é˜µ</h4>
                        <p>\[
                        \mathbf{F} = \begin{bmatrix}
                        \mathbf{I} & \Delta t \mathbf{I} & \mathbf{0} & \mathbf{0} & \mathbf{0} \\
                        \mathbf{0} & \mathbf{I} & -\mathbf{R}[\mathbf{a}_m - \mathbf{b}_a]_{\times}\Delta t & -\mathbf{R}\Delta t & \mathbf{0} \\
                        \mathbf{0} & \mathbf{0} & \mathbf{I} - [\boldsymbol{\omega}_m - \mathbf{b}_g]_{\times}\Delta t & \mathbf{0} & -\mathbf{I}\Delta t \\
                        \mathbf{0} & \mathbf{0} & \mathbf{0} & \mathbf{I} & \mathbf{0} \\
                        \mathbf{0} & \mathbf{0} & \mathbf{0} & \mathbf{0} & \mathbf{I}
                        \end{bmatrix}
                        \]</p>
                    </div>
                    <div class="diagram" id="imu-integration">
                        <!-- IMU integration visualization will be rendered here -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">L</div>
                    <h2 class="card-title">LiDARæµ‹é‡æ›´æ–° (LIO)</h2>
                </div>
                <p>ä½¿ç”¨LiDARç‚¹äº‘æ•°æ®æ ¡æ­£IMUé¢„æµ‹çš„çŠ¶æ€ï¼š</p>
                
                <div class="visualization-container">
                    <div class="diagram" id="lidar-update">
                        <!-- LiDAR update visualization will be rendered here -->
                    </div>
                    <div class="math-formula">
                        <h3>ç‚¹åˆ°å¹³é¢æ®‹å·®</h3>
                        <p>\[
                        r_l(\mathbf{x}_{k+1}, L_{p_j}) = \mathbf{u}_j^T \cdot ({}^G\mathbf{p}_{I_{k+1}} + {}^G\mathbf{R}_{I_{k+1}} \cdot \text{Exp}({}^G\delta\mathbf{r}_{I_{k+1}}) \cdot ({}^I\mathbf{R}_{L_{k+1}} \cdot L_{p_j} + {}^I\mathbf{p}_{L_{k+1}}) - \mathbf{q}_j)
                        \]</p>
                        
                        <h3>ESIKFæ›´æ–°æ–¹ç¨‹</h3>
                        <p>\[
                        \begin{aligned}
                        \mathbf{K} &= \mathbf{P} \mathbf{H}_l^T (\mathbf{H}_l \mathbf{P} \mathbf{H}_l^T + \mathbf{R}_l)^{-1} \\
                        \delta\mathbf{x} &= -\mathbf{K} \cdot r_l(\check{\mathbf{x}}_{k+1}) \\
                        \check{\mathbf{x}}_{k+1} &\leftarrow \check{\mathbf{x}}_{k+1} \oplus \delta\mathbf{x} \\
                        \mathbf{P} &\leftarrow (\mathbf{I} - \mathbf{K} \mathbf{H}_l) \mathbf{P}
                        \end{aligned}
                        \]</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">V</div>
                    <h2 class="card-title">è§†è§‰æµ‹é‡æ›´æ–° (VIO)</h2>
                </div>
                <p>R3LIVEä½¿ç”¨ç›´æ¥æ³•ï¼Œæœ€å°åŒ–å¸§åˆ°åœ°å›¾çš„å…‰åº¦è¯¯å·®ï¼š</p>
                
                <div class="visualization-container">
                    <div class="math-formula">
                        <h3>å…‰åº¦è¯¯å·®å…¬å¼</h3>
                        <p>\[
                        r_p(\mathbf{x}_{k+1}) = I_{\text{ref}}(\mathbf{u}) - \exp(a) \cdot I_{\text{curr}} \left( \pi \left( \mathbf{K} \cdot \text{Exp}(\delta\mathbf{r}) \cdot \mathbf{R}_{\text{ref\_to\_curr}} \cdot (D_{\text{ref}} \cdot \mathbf{K}^{-1} \cdot \mathbf{u}) + \mathbf{p}_{\text{ref\_to\_curr}} \right) \right) - b
                        \]</p>
                        <p>å…¶ä¸­ï¼š</p>
                        <ul>
                            <li>\(I_{\text{ref}}\) å’Œ \(I_{\text{curr}}\) æ˜¯å‚è€ƒå¸§å’Œå½“å‰å¸§çš„åƒç´ äº®åº¦</li>
                            <li>\(\pi\) æ˜¯é€è§†æŠ•å½±å‡½æ•°</li>
                            <li>\(\mathbf{K}\) æ˜¯ç›¸æœºå†…å‚</li>
                            <li>\(D_{\text{ref}}\) æ˜¯ä»LIOè·å–çš„æ·±åº¦ä¿¡æ¯</li>
                            <li>\(a\) å’Œ \(b\) æ˜¯å…‰åº¦ä»¿å°„å˜æ¢å‚æ•°</li>
                        </ul>
                    </div>
                    <div class="diagram" id="photometric-error">
                        <!-- Photometric error visualization will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- DROID-SLAM Content -->
        <div id="droidslam" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">D</div>
                    <h2 class="card-title">ç«¯åˆ°ç«¯ç¥ç»ç½‘ç»œæ¶æ„</h2>
                </div>
                <p>DROID-SLAMæ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„è§†è§‰SLAMç³»ç»Ÿï¼š</p>
                <ul>
                    <li>æ•´ä¸ªç³»ç»Ÿï¼ˆç‰¹å¾æå–ã€ä½å§¿ä¼°è®¡ã€æ·±åº¦ä¼°è®¡ã€ä¼˜åŒ–ï¼‰éƒ½æ˜¯ç¥ç»ç½‘ç»œ</li>
                    <li>ä½¿ç”¨å¯†é›†å…‰æµè€Œä¸æ˜¯ç¨€ç–ç‰¹å¾ç‚¹</li>
                    <li>å¯å¤„ç†å•ç›®ã€åŒç›®å’ŒRGB-Dè¾“å…¥</li>
                </ul>
                
                <div class="visualization-container">
                    <div class="diagram" id="droid-architecture">
                        <!-- DROID-SLAM architecture visualization -->
                    </div>
                    <div class="math-formula">
                        <h3>DROID-SLAMæ·±åº¦å­¦ä¹ ä¼˜åŒ–æ–¹æ³•</h3>
                        
                        <h4>1. å¯†é›†å…‰æµè®¡ç®—</h4>
                        <p>ä½¿ç”¨ç¥ç»ç½‘ç»œè®¡ç®—åƒç´ çº§å¯†é›†å…‰æµï¼š</p>
                        <p>\[
                        \mathbf{f}_{i \to j} = \text{FlowNet}(\mathbf{I}_i, \mathbf{I}_j, \mathbf{g}_i, \mathbf{g}_j)
                        \]</p>
                        <p>å…¶ä¸­\(\mathbf{g}_i, \mathbf{g}_j\)æ˜¯ç‰¹å¾æå–ç½‘ç»œè¾“å‡ºçš„ç‰¹å¾å›¾</p>
                        
                        <h4>2. å¯å¾®åˆ†Bundle Adjustment (DBA)</h4>
                        <p>ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼š</p>
                        <p>\[
                        \mathcal{L} = \sum_{(i,j) \in \mathcal{E}} \sum_{\mathbf{p} \in \mathcal{P}_{ij}} \rho\left(\|\mathbf{r}_{ij}(\mathbf{p})\|^2\right)
                        \]</p>
                        <p>å…¶ä¸­æ®‹å·®å‡½æ•°ä¸ºï¼š</p>
                        <p>\[
                        \mathbf{r}_{ij}(\mathbf{p}) = \mathbf{p} + \mathbf{f}_{i \to j}(\mathbf{p}) - \pi(\mathbf{T}_{ij} \cdot \pi^{-1}(\mathbf{p}, d_i(\mathbf{p})))
                        \]</p>
                        
                        <h4>3. è¿­ä»£ä½å§¿ä¼°è®¡</h4>
                        <p>ä½¿ç”¨GRUç½‘ç»œè¿­ä»£æ›´æ–°ä½å§¿å’Œæ·±åº¦ï¼š</p>
                        <p>\[
                        \begin{align}
                        \mathbf{h}_t &= \text{GRU}(\mathbf{h}_{t-1}, [\mathbf{r}_t, \mathbf{g}_t]) \\
                        \Delta\boldsymbol{\xi}_t &= \text{MLP}_{\text{pose}}(\mathbf{h}_t) \\
                        \Delta\mathbf{d}_t &= \text{MLP}_{\text{depth}}(\mathbf{h}_t)
                        \end{align}
                        \]</p>
                        
                        <h4>4. ç½‘ç»œè®­ç»ƒæŸå¤±</h4>
                        <p>ç»ˆç«¯åˆ°ç«¯è®­ç»ƒæŸå¤±å‡½æ•°ï¼š</p>
                        <p>\[
                        \mathcal{L}_{\text{total}} = \lambda_1 \mathcal{L}_{\text{flow}} + \lambda_2 \mathcal{L}_{\text{pose}} + \lambda_3 \mathcal{L}_{\text{depth}} + \lambda_4 \mathcal{L}_{\text{BA}}
                        \]</p>
                        <p>åŒ…æ‹¬å…‰æµæŸå¤±ã€ä½å§¿æŸå¤±ã€æ·±åº¦æŸå¤±å’ŒBAæŸå¤±</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">F</div>
                    <h2 class="card-title">å¯†é›†å…‰æµä¸å¯¹åº”å…³ç³»</h2>
                </div>
                <p>å¯†é›†å…‰æµæè¿°å›¾åƒåºåˆ—ä¸­åƒç´ çš„è¡¨è§‚è¿åŠ¨ï¼š</p>
                
                <div class="visualization-container">
                    <div class="math-formula">
                        <h3>å…‰æµçš„ä½œç”¨</h3>
                        <ul>
                            <li>æä¾›åƒç´ çº§çš„å¯¹åº”å…³ç³»</li>
                            <li>æ›¿ä»£ä¼ ç»Ÿç‰¹å¾æå–å’ŒåŒ¹é…</li>
                            <li>ä½¿ç³»ç»Ÿå¯¹çº¹ç†ç¼ºå¤±ç¯å¢ƒæ›´é²æ£’</li>
                        </ul>
                        
                        <h3>ä¸ä¼ ç»ŸSLAMå¯¹æ¯”</h3>
                        <p>ä¼ ç»Ÿæ–¹æ³•ä½¿ç”¨ç¨€ç–ç‰¹å¾ç‚¹ï¼ˆå¦‚SIFTã€ORBï¼‰ï¼Œè€ŒDROID-SLAMåˆ©ç”¨æ‰€æœ‰åƒç´ ä¿¡æ¯</p>
                    </div>
                    <div class="diagram" id="optical-flow">
                        <!-- Optical flow visualization -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">B</div>
                    <h2 class="card-title">å¯å¾®åˆ†å¯†é›†å…‰æŸæ³•å¹³å·® (DBA)</h2>
                </div>
                <p>DROID-SLAMçš„æ ¸å¿ƒåˆ›æ–°ï¼š</p>
                
                <div class="visualization-container">
                    <div class="diagram" id="dba-layer">
                        <!-- DBA layer visualization -->
                    </div>
                    <div class="math-formula">
                        <h3>DBAå±‚å·¥ä½œåŸç†</h3>
                        <p>\[
                        \begin{aligned}
                        \text{è¾“å…¥} & : \text{å…‰æµã€åˆå§‹ä½å§¿ã€æ·±åº¦} \\
                        \text{ä¼˜åŒ–} & : \text{å¯†é›†BAæœ€å°åŒ–é‡æŠ•å½±è¯¯å·®} \\
                        \text{è¾“å‡º} & : \text{ä¼˜åŒ–åçš„ä½å§¿å’Œæ·±åº¦} \\
                        \text{æ¢¯åº¦} & : \text{åå‘ä¼ æ’­æ›´æ–°ç½‘ç»œå‚æ•°}
                        \end{aligned}
                        \]</p>
                        
                        <h3>ä¼˜åŠ¿</h3>
                        <ul>
                            <li>ç«¯åˆ°ç«¯å¯è®­ç»ƒ</li>
                            <li>å…¨å±€ä¼˜åŒ–å‡å°‘ç´¯ç§¯è¯¯å·®</li>
                            <li>å¯¹æŒ‘æˆ˜æ€§ç¯å¢ƒé²æ£’</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">O</div>
                    <h2 class="card-title">å…¨å±€ä¼˜åŒ–ä¸å›ç¯æ£€æµ‹</h2>
                </div>
                <p>DROID-SLAMé€šè¿‡DBAå±‚å®ç°å…¨å±€ä¼˜åŒ–ï¼š</p>
                
                <div class="visualization-container">
                    <div class="math-formula">
                        <h3>ä¼˜åŒ–ç›®æ ‡</h3>
                        <p>æœ€å°åŒ–æ‰€æœ‰åƒç´ çš„é‡æŠ•å½±è¯¯å·®ï¼š</p>
                        <p>\[
                        \min_{\mathbf{T}, \mathbf{D}} \sum_{i} \sum_{p} \| \pi(\mathbf{T}_{ij} \cdot \mathbf{D}_i(p)) - p' \|^2
                        \]</p>
                        <p>å…¶ä¸­ \(\mathbf{T}\) æ˜¯ä½å§¿ï¼Œ\(\mathbf{D}\) æ˜¯æ·±åº¦å›¾</p>
                        
                        <h3>å›ç¯å¤„ç†</h3>
                        <p>å½“æ£€æµ‹åˆ°å›ç¯æ—¶ï¼ŒDBAå±‚è‡ªåŠ¨è°ƒæ•´æ‰€æœ‰ç›¸å…³å¸§çš„ä½å§¿ï¼Œçº æ­£ç´¯ç§¯è¯¯å·®</p>
                    </div>
                    <div class="diagram" id="global-optimization">
                        <!-- Global optimization visualization -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comparison Content -->
        <div id="comparison" class="tab-content">
            <div class="card">
                <h2 class="card-title" style="text-align: center; margin-bottom: 20px;">R3LIVE ä¸ DROID-SLAM å¯¹æ¯”åˆ†æ</h2>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>R3LIVE</th>
                            <th>DROID-SLAM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æ ¸å¿ƒæ¶æ„</strong></td>
                            <td>LiDAR-æƒ¯æ€§-è§†è§‰ç´§è€¦åˆ</td>
                            <td>ç«¯åˆ°ç«¯æ·±åº¦å­¦ä¹ </td>
                        </tr>
                        <tr>
                            <td><strong>ä¼ æ„Ÿå™¨èåˆ</strong></td>
                            <td>LiDAR + IMU + ç›¸æœºï¼ˆå¿…éœ€ï¼‰</td>
                            <td>ä¸»è¦è§†è§‰ï¼ˆå•ç›®/åŒç›®/RGB-Dï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>å‰ç«¯å¤„ç†</strong></td>
                            <td>IMUé¢„ç§¯åˆ† + LiDARç‰¹å¾æå–</td>
                            <td>ç¥ç»ç½‘ç»œç‰¹å¾æå– + å¯†é›†å…‰æµ</td>
                        </tr>
                        <tr>
                            <td><strong>åç«¯ä¼˜åŒ–</strong></td>
                            <td>ESIKFæ»¤æ³¢å™¨ + å› å­å›¾ä¼˜åŒ–</td>
                            <td>å¯å¾®åˆ†å¯†é›†å…‰æŸæ³•å¹³å·®(DBA)</td>
                        </tr>
                        <tr>
                            <td><strong>è§†è§‰æ–¹æ³•</strong></td>
                            <td>ç›´æ¥æ³•ï¼ˆæœ€å°åŒ–å…‰åº¦è¯¯å·®ï¼‰</td>
                            <td>å¯†é›†å…‰æµä¸é‡æŠ•å½±è¯¯å·®</td>
                        </tr>
                        <tr>
                            <td><strong>åœ°å›¾è¾“å‡º</strong></td>
                            <td>å¸¦RGBé¢œè‰²çš„ç¨ å¯†ç‚¹äº‘</td>
                            <td>ç¨ å¯†3Dç‚¹äº‘ï¼ˆå‡ ä½•+çº¹ç†ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>ä¼˜åŠ¿</strong></td>
                            <td>å¤šä¼ æ„Ÿå™¨äº’è¡¥ï¼Œå‡ ä½•ç»“æ„ç²¾ç¡®</td>
                            <td>ç«¯åˆ°ç«¯å­¦ä¹ ï¼ŒæŒ‘æˆ˜ç¯å¢ƒé²æ£’</td>
                        </tr>
                        <tr>
                            <td><strong>é€‚ç”¨åœºæ™¯</strong></td>
                            <td>è‡ªåŠ¨é©¾é©¶ã€æ— äººæœºã€æ‰‹æŒå»ºå›¾</td>
                            <td>AR/VRã€æœºå™¨äººå¯¼èˆªã€3Dé‡å»º</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="visualization-container">
                    <div style="flex: 1; min-width: 300px;">
                        <h3 style="text-align: center; margin: 20px 0;">R3LIVEå·¥ä½œæµç¨‹</h3>
                        <canvas id="r3live-chart" height="300"></canvas>
                    </div>
                    <div style="flex: 1; min-width: 300px;">
                        <h3 style="text-align: center; margin: 20px 0;">DROID-SLAMå·¥ä½œæµç¨‹</h3>
                        <canvas id="droid-chart" height="300"></canvas>
                    </div>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3498db;"></div>
                        <span>IMU/LiDARå¤„ç†</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2ecc71;"></div>
                        <span>è§†è§‰å¤„ç†</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #9b59b6;"></div>
                        <span>æ•°æ®èåˆ</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e74c3c;"></div>
                        <span>ä¼˜åŒ–è¿‡ç¨‹</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f1c40f;"></div>
                        <span>åœ°å›¾æ„å»º</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸŒ</div>
                <h2 class="card-title">åº”ç”¨åœºæ™¯åˆ†æä¸éƒ¨ç½²å»ºè®®</h2>
            </div>
            
            <div class="visualization-container">
                <div class="math-formula">
                    <h3>R3LIVEé€‚ç”¨åœºæ™¯</h3>
                    <ul>
                        <li><strong>é«˜ç²¾åº¦æµ‹ç»˜ï¼š</strong>éœ€è¦cmçº§ç²¾åº¦çš„ä¸‰ç»´é‡å»ºä»»åŠ¡</li>
                        <li><strong>å®¤å¤–å¤§èŒƒå›´ï¼š</strong>å¼€æ”¾å¼ç¯å¢ƒä¸‹çš„è‡ªåŠ¨é©¾é©¶å’Œæœºå™¨äººå¯¼èˆª</li>
                        <li><strong>å¤æ‚å…‰ç…§ï¼š</strong>å…‰ç…§å˜åŒ–å‰§çƒˆçš„ç¯å¢ƒï¼ˆé«—é“ã€å¤œé—´ç­‰ï¼‰</li>
                        <li><strong>é«˜åŠ¨æ€åœºæ™¯ï¼š</strong>å¿«é€Ÿè¿åŠ¨ä¸‹çš„å®æ—¶SLAM</li>
                        <li><strong>é•¿æœŸè¿è¡Œï¼š</strong>éœ€è¦é•¿æ—¶é—´ç¨³å®šè¿è¡Œçš„ç³»ç»Ÿ</li>
                    </ul>
                    
                    <h3>R3LIVEéƒ¨ç½²è¦æ±‚</h3>
                    <ul>
                        <li><strong>ç¡¬ä»¶é…ç½®ï¼š</strong>LiDAR + IMU + ç›¸æœºçš„ç²¾ç¡®æ ‡å®šç³»ç»Ÿ</li>
                        <li><strong>è®¡ç®—èµ„æºï¼š</strong>CPUå¯†é›†å‹ï¼Œéœ€è¦é«˜æ€§èƒ½å¤„ç†å™¨</li>
                        <li><strong>å­˜å‚¨éœ€æ±‚ï¼š</strong>ä¸­ç­‰ï¼Œä¸»è¦å­˜å‚¨ç¨€ç–ç‰¹å¾å’Œå…³é”®å¸§</li>
                        <li><strong>å®æ—¶æ€§ï¼š</strong>å¯å®ç°å®æ—¶å¤„ç†ï¼ˆ>30Hzï¼‰</li>
                    </ul>
                </div>
                
                <div class="math-formula">
                    <h3>DROID-SLAMé€‚ç”¨åœºæ™¯</h3>
                    <ul>
                        <li><strong>å®¤å†…ç¯å¢ƒï¼š</strong>çº¹ç†ä¸°å¯Œçš„å®¤å†…åœºæ™¯</li>
                        <li><strong>ç¨ å¯†é‡å»ºï¼š</strong>éœ€è¦ç¨ å¯†æ·±åº¦å›¾çš„åº”ç”¨</li>
                        <li><strong>ä½æˆæœ¬éƒ¨ç½²ï¼š</strong>ä»…éœ€ç›¸æœºçš„ä½æˆæœ¬è§£å†³æ–¹æ¡ˆ</li>
                        <li><strong>å¤šæ ·åŒ–åœºæ™¯ï¼š</strong>éœ€è¦åœ¨å¤šç§ä¸åŒåœºæ™¯ä¸‹éƒ¨ç½²</li>
                        <li><strong>ç¦»çº¿å¤„ç†ï¼š</strong>å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„åº”ç”¨</li>
                    </ul>
                    
                    <h3>DROID-SLAMéƒ¨ç½²è¦æ±‚</h3>
                    <ul>
                        <li><strong>ç¡¬ä»¶é…ç½®ï¼š</strong>ä»…éœ€å•ç›®æˆ–åŒç›®ç›¸æœº</li>
                        <li><strong>è®¡ç®—èµ„æºï¼š</strong>GPUå¯†é›†å‹ï¼Œéœ€è¦é«˜æ€§èƒ½GPUæ”¯æŒ</li>
                        <li><strong>å­˜å‚¨éœ€æ±‚ï¼š</strong>è¾ƒé«˜ï¼Œéœ€å­˜å‚¨å¯†é›†ç‰¹å¾å›¾</li>
                        <li><strong>å®æ—¶æ€§ï¼š</strong>å—GPUæ€§èƒ½é™åˆ¶ï¼Œé€šå¸¸<15Hz</li>
                    </ul>
                </div>
            </div>
            
            <div class="math-formula">
                <h3>é€‰å‹å†³ç­–çŸ©é˜µ</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>åº”ç”¨éœ€æ±‚</th>
                            <th>æ¨èç³»ç»Ÿ</th>
                            <th>ç†ç”±</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>é«˜ç²¾åº¦å®šä½ + å®æ—¶æ€§</td>
                            <td><strong>R3LIVE</strong></td>
                            <td>å¤šä¼ æ„Ÿå™¨èåˆæä¾›æ›´é«˜ç²¾åº¦å’Œé²æ£’æ€§</td>
                        </tr>
                        <tr>
                            <td>ç¨ å¯†é‡å»º + æˆæœ¬æ•æ„Ÿ</td>
                            <td><strong>DROID-SLAM</strong></td>
                            <td>ä»…éœ€ç›¸æœºï¼Œè¾“å‡ºç¨ å¯†æ·±åº¦å›¾</td>
                        </tr>
                        <tr>
                            <td>å®¤å¤–å¤§èŒƒå›´å¯¼èˆª</td>
                            <td><strong>R3LIVE</strong></td>
                            <td>LiDARæä¾›ç²¾ç¡®çš„å‡ ä½•ç»“æ„ä¿¡æ¯</td>
                        </tr>
                        <tr>
                            <td>å®¤å†…è§†è§‰å¯¼èˆª</td>
                            <td><strong>DROID-SLAM</strong></td>
                            <td>åœ¨çº¹ç†ä¸°å¯Œç¯å¢ƒä¸‹è¡¨ç°ä¼˜å¼‚</td>
                        </tr>
                        <tr>
                            <td>å¿«é€Ÿè¿åŠ¨åœºæ™¯</td>
                            <td><strong>R3LIVE</strong></td>
                            <td>IMUé«˜é¢‘æ•°æ®å¤„ç†è¿åŠ¨æ¨¡ç³Š</td>
                        </tr>
                        <tr>
                            <td>å¤šåœºæ™¯é€‚åº”æ€§</td>
                            <td><strong>DROID-SLAM</strong></td>
                            <td>æ·±åº¦å­¦ä¹ æ¨¡å‹æ³›åŒ–èƒ½åŠ›å¼º</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="key-concept">
                <h3>æœªæ¥å‘å±•è¶‹åŠ¿</h3>
                <p><strong>æ··åˆæ¶æ„ï¼š</strong>æœªæ¥çš„SLAMç³»ç»Ÿå¯èƒ½ä¼šç»“åˆä¸¤ç§æ–¹æ³•çš„ä¼˜åŠ¿ï¼š</p>
                <ul>
                    <li>ä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•è¿›è¡Œå®æ—¶çŠ¶æ€ä¼°è®¡</li>
                    <li>åˆ©ç”¨æ·±åº¦å­¦ä¹ è¿›è¡Œåå¤„ç†ä¼˜åŒ–å’Œç¨ å¯†é‡å»º</li>
                    <li>è‡ªé€‚åº”åœ°åœ¨ä¸åŒåœºæ™¯ä¸‹åˆ‡æ¢ç®—æ³•ç­–ç•¥</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p>R3LIVE ä¸ DROID-SLAM æ ¸å¿ƒåŸç†å¯è§†åŒ– | æ•°å­¦å…¬å¼ä½¿ç”¨MathJaxæ¸²æŸ“</p>
        </div>
    </div>
    
    <script>
        // Tab switching functionality
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and contents
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Show corresponding content
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                
                // Render visualizations when tab becomes active
                if (tabId === 'r3live') {
                    renderR3LIVEVisualizations();
                } else if (tabId === 'droidslam') {
                    renderDROIDSLAMVisualizations();
                } else if (tabId === 'comparison') {
                    renderComparisonCharts();
                }
            });
        });
        
        // R3LIVE Visualization Functions
        function renderR3LIVEVisualizations() {
            renderR3LIVEArchitecture();
            renderIMUIntegration();
            renderLiDARUpdate();
            renderPhotometricError();
        }
        
        function renderR3LIVEArchitecture() {
            const container = document.getElementById('r3live-architecture');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw LIO subsystem
            ctx.fillStyle = '#3498db';
            ctx.beginPath();
            ctx.arc(canvas.width/4, canvas.height/2, 50, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('LIO', canvas.width/4, canvas.height/2 + 7);
            
            // Draw VIO subsystem
            ctx.fillStyle = '#2ecc71';
            ctx.beginPath();
            ctx.arc(canvas.width*3/4, canvas.height/2, 50, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('VIO', canvas.width*3/4, canvas.height/2 + 7);
            
            // Draw IMU
            ctx.fillStyle = '#9b59b6';
            ctx.beginPath();
            ctx.arc(canvas.width/2, canvas.height/4, 30, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = '14px Arial';
            ctx.fillText('IMU', canvas.width/2, canvas.height/4 + 5);
            
            // Draw connections
            ctx.strokeStyle = '#7f8c8d';
            ctx.lineWidth = 2;
            
            // IMU to LIO
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, canvas.height/4 + 30);
            ctx.lineTo(canvas.width/4, canvas.height/2 - 50);
            ctx.stroke();
            
            // IMU to VIO
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, canvas.height/4 + 30);
            ctx.lineTo(canvas.width*3/4, canvas.height/2 - 50);
            ctx.stroke();
            
            // LIO to VIO
            ctx.beginPath();
            ctx.moveTo(canvas.width/4 + 50, canvas.height/2);
            ctx.lineTo(canvas.width*3/4 - 50, canvas.height/2);
            ctx.stroke();
            
            // Draw map output
            ctx.fillStyle = '#f1c40f';
            ctx.fillRect(canvas.width/2 - 60, canvas.height*3/4 - 25, 120, 50);
            ctx.fillStyle = 'black';
            ctx.font = '16px Arial';
            ctx.fillText('å½©è‰²ç‚¹äº‘åœ°å›¾', canvas.width/2, canvas.height*3/4);
        }
        
        function renderIMUIntegration() {
            const container = document.getElementById('imu-integration');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw timeline
            ctx.strokeStyle = '#34495e';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, canvas.height/2);
            ctx.lineTo(canvas.width - 50, canvas.height/2);
            ctx.stroke();
            
            // Draw IMU data points
            const points = 15;
            for (let i = 0; i < points; i++) {
                const x = 50 + (i / (points - 1)) * (canvas.width - 100);
                const y = canvas.height/2 + Math.sin(i * 0.8) * 30;
                
                ctx.fillStyle = '#3498db';
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw acceleration vectors
                if (i < points - 1) {
                    const nextX = 50 + ((i+1) / (points - 1)) * (canvas.width - 100);
                    const nextY = canvas.height/2 + Math.sin((i+1) * 0.8) * 30;
                    
                    const dx = nextX - x;
                    const dy = nextY - y;
                    
                    // Draw direction vector
                    ctx.strokeStyle = '#e74c3c';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                    ctx.lineTo(x + dx * 0.7, y + dy * 0.7);
                    ctx.stroke();
                    
                    // Draw arrowhead
                    ctx.fillStyle = '#e74c3c';
                    drawArrowhead(ctx, x + dx * 0.7, y + dy * 0.7, Math.atan2(dy, dx));
                }
            }
            
            // Draw integrated pose
            ctx.fillStyle = '#2ecc71';
            ctx.beginPath();
            ctx.arc(canvas.width - 60, canvas.height/2, 30, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = '14px Arial';
            ctx.fillText('ä½å§¿', canvas.width - 60, canvas.height/2 + 5);
            
            // Labels
            ctx.fillStyle = 'black';
            ctx.font = '14px Arial';
            ctx.fillText('IMUæ•°æ®æµ', 50, canvas.height/2 - 40);
            ctx.fillText('ç§¯åˆ†ç»“æœ', canvas.width - 100, canvas.height/2 - 40);
        }
        
        function drawArrowhead(ctx, x, y, angle) {
            const size = 8;
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(-size, -size/2);
            ctx.lineTo(-size, size/2);
            ctx.closePath();
            ctx.fill();
            
            ctx.restore();
        }
        
        function renderLiDARUpdate() {
            const container = document.getElementById('lidar-update');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw plane
            ctx.fillStyle = 'rgba(52, 152, 219, 0.3)';
            ctx.beginPath();
            ctx.moveTo(50, canvas.height - 50);
            ctx.lineTo(canvas.width - 50, canvas.height - 100);
            ctx.lineTo(canvas.width - 50, canvas.height - 150);
            ctx.lineTo(50, canvas.height - 100);
            ctx.closePath();
            ctx.fill();
            
            // Draw normal vector
            const planeCenterX = (50 + canvas.width - 50) / 2;
            const planeCenterY = (canvas.height - 50 + canvas.height - 100 + canvas.height - 150 + canvas.height - 100) / 4;
            
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(planeCenterX, planeCenterY);
            ctx.lineTo(planeCenterX, planeCenterY - 80);
            ctx.stroke();
            
            // Draw arrowhead
            ctx.fillStyle = '#e74c3c';
            drawArrowhead(ctx, planeCenterX, planeCenterY - 80, -Math.PI/2);
            
            // Draw LiDAR points
            for (let i = 0; i < 20; i++) {
                const x = 50 + Math.random() * (canvas.width - 100);
                const y = 50 + Math.random() * (canvas.height - 200);
                
                ctx.fillStyle = '#2ecc71';
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw projection line to plane
                ctx.strokeStyle = 'rgba(149, 165, 166, 0.5)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, y);
                
                // Simple projection - just move down to plane
                const planeY = canvas.height - 100 - (x - 50) * 0.25;
                ctx.lineTo(x, planeY);
                ctx.stroke();
                
                // Draw projected point
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(x, planeY, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw LiDAR sensor
            ctx.fillStyle = '#9b59b6';
            ctx.beginPath();
            ctx.arc(canvas.width/2, 40, 25, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = '14px Arial';
            ctx.fillText('LiDAR', canvas.width/2, 45);
            
            // Labels
            ctx.fillStyle = 'black';
            ctx.font = '14px Arial';
            ctx.fillText('æ¿€å…‰ç‚¹', canvas.width - 100, 80);
            ctx.fillText('æŠ•å½±ç‚¹', canvas.width - 100, canvas.height - 170);
            ctx.fillText('å¹³é¢æ³•å‘é‡', planeCenterX + 20, planeCenterY - 40);
        }
        
        function renderPhotometricError() {
            const container = document.getElementById('photometric-error');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw reference frame (map)
            ctx.fillStyle = 'rgba(52, 152, 219, 0.2)';
            ctx.fillRect(20, 20, canvas.width/2 - 40, canvas.height - 40);
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.strokeRect(20, 20, canvas.width/2 - 40, canvas.height - 40);
            
            // Draw current frame
            ctx.fillStyle = 'rgba(46, 204, 113, 0.2)';
            ctx.fillRect(canvas.width/2 + 20, 20, canvas.width/2 - 40, canvas.height - 40);
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 2;
            ctx.strokeRect(canvas.width/2 + 20, 20, canvas.width/2 - 40, canvas.height - 40);
            
            // Draw some features in reference frame
            for (let i = 0; i < 50; i++) {
                const x = 30 + Math.random() * (canvas.width/2 - 60);
                const y = 30 + Math.random() * (canvas.height - 60);
                const size = 2 + Math.random() * 4;
                const brightness = 50 + Math.floor(Math.random() * 150);
                
                ctx.fillStyle = `rgb(${brightness}, ${brightness}, ${brightness})`;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw corresponding points in current frame (slightly shifted)
            for (let i = 0; i < 50; i++) {
                const refX = 30 + Math.random() * (canvas.width/2 - 60);
                const refY = 30 + Math.random() * (canvas.height - 60);
                const currX = canvas.width/2 + 30 + Math.random() * (canvas.width/2 - 60);
                const currY = 30 + Math.random() * (canvas.height - 60);
                const size = 2 + Math.random() * 4;
                const brightness = 50 + Math.floor(Math.random() * 150);
                
                // Draw in current frame
                ctx.fillStyle = `rgb(${brightness}, ${brightness}, ${brightness})`;
                ctx.beginPath();
                ctx.arc(currX, currY, size, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw connection line
                ctx.strokeStyle = 'rgba(231, 76, 60, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(refX, refY);
                ctx.lineTo(currX, currY);
                ctx.stroke();
                
                // Draw error vector
                const errorVecX = currX - (refX + canvas.width/2);
                const errorVecY = currY - refY;
                
                if (Math.abs(errorVecX) > 5 || Math.abs(errorVecY) > 5) {
                    ctx.strokeStyle = '#e74c3c';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(refX + canvas.width/2, refY);
                    ctx.lineTo(currX, currY);
                    ctx.stroke();
                }
            }
            
            // Labels
            ctx.fillStyle = 'black';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('åœ°å›¾å‚è€ƒå¸§', canvas.width/4, 15);
            ctx.fillText('å½“å‰ç›¸æœºå¸§', canvas.width*3/4, 15);
            ctx.fillText('å…‰åº¦è¯¯å·®å‘é‡', canvas.width/2, canvas.height - 20);
        }
        
        // DROID-SLAM Visualization Functions
        function renderDROIDSLAMVisualizations() {
            renderDROIDArchitecture();
            renderOpticalFlow();
            renderDBALayer();
            renderGlobalOptimization();
        }
        
        function renderDROIDArchitecture() {
            const container = document.getElementById('droid-architecture');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw neural network layers
            const layers = [
                { name: "è¾“å…¥å¸§", color: "#3498db" },
                { name: "ç‰¹å¾æå–", color: "#2ecc71" },
                { name: "å…‰æµé¢„æµ‹", color: "#9b59b6" },
                { name: "DBAå±‚", color: "#e74c3c" },
                { name: "ä½å§¿/æ·±åº¦", color: "#f1c40f" }
            ];
            
            const layerWidth = 80;
            const layerSpacing = (canvas.width - layerWidth * layers.length) / (layers.length + 1);
            
            for (let i = 0; i < layers.length; i++) {
                const x = layerSpacing + i * (layerWidth + layerSpacing);
                const y = canvas.height / 2 - 40;
                
                // Draw layer
                ctx.fillStyle = layers[i].color;
                ctx.fillRect(x, y, layerWidth, 80);
                
                // Draw layer name
                ctx.fillStyle = 'white';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(layers[i].name, x + layerWidth/2, y + 45);
                
                // Draw connections to next layer
                if (i < layers.length - 1) {
                    const nextX = x + layerWidth + layerSpacing;
                    
                    ctx.strokeStyle = '#7f8c8d';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x + layerWidth, y + 40);
                    ctx.lineTo(nextX, y + 40);
                    ctx.stroke();
                    
                    // Draw arrowhead
                    ctx.fillStyle = '#7f8c8d';
                    drawArrowhead(ctx, nextX, y + 40, 0);
                }
            }
            
            // Draw feedback connection
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(canvas.width - layerSpacing - layerWidth/2, canvas.height/2 + 40);
            ctx.lineTo(canvas.width - layerSpacing - layerWidth/2, canvas.height/2 + 100);
            ctx.lineTo(layerSpacing + layerWidth/2, canvas.height/2 + 100);
            ctx.lineTo(layerSpacing + layerWidth/2, canvas.height/2 + 40);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Draw arrowhead
            drawArrowhead(ctx, layerSpacing + layerWidth/2, canvas.height/2 + 40, -Math.PI/2);
            
            // Draw label
            ctx.fillStyle = '#e74c3c';
            ctx.font = '14px Arial';
            ctx.fillText('æ¢¯åº¦åå‘ä¼ æ’­', canvas.width/2, canvas.height/2 + 90);
        }
        
        function renderOpticalFlow() {
            const container = document.getElementById('optical-flow');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw reference frame
            ctx.fillStyle = 'rgba(52, 152, 219, 0.1)';
            ctx.fillRect(20, 20, canvas.width - 40, canvas.height - 40);
            
            // Draw a moving object
            const centerX = canvas.width/2;
            const centerY = canvas.height/2;
            const radius = 60;
            
            // Draw object in previous position
            ctx.fillStyle = 'rgba(46, 204, 113, 0.5)';
            ctx.beginPath();
            ctx.arc(centerX - 40, centerY, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw object in current position
            ctx.fillStyle = 'rgba(231, 76, 60, 0.5)';
            ctx.beginPath();
            ctx.arc(centerX + 40, centerY, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw optical flow vectors
            for (let i = 0; i < 100; i++) {
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * (radius - 10);
                const x = centerX - 40 + Math.cos(angle) * dist;
                const y = centerY + Math.sin(angle) * dist;
                
                ctx.strokeStyle = '#9b59b6';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x + 80, y);
                ctx.stroke();
                
                // Draw arrowhead
                drawArrowhead(ctx, x + 80, y, 0);
            }
            
            // Labels
            ctx.fillStyle = 'black';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('å‰ä¸€å¸§ç‰©ä½“ä½ç½®', centerX - 40, centerY - radius - 10);
            ctx.fillText('å½“å‰å¸§ç‰©ä½“ä½ç½®', centerX + 40, centerY - radius - 10);
            ctx.fillText('å…‰æµå‘é‡è¡¨ç¤ºåƒç´ è¿åŠ¨', canvas.width/2, canvas.height - 20);
        }
        
        function renderDBALayer() {
            const container = document.getElementById('dba-layer');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw input
            ctx.fillStyle = '#3498db';
            ctx.fillRect(50, 50, 100, 60);
            ctx.fillStyle = 'white';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('åˆå§‹ä½å§¿', 100, 80);
            ctx.fillText('æ·±åº¦ä¼°è®¡', 100, 95);
            
            // Draw DBA layer
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(200, 40, 120, 80);
            ctx.fillStyle = 'white';
            ctx.fillText('å¯å¾®åˆ†DBAå±‚', 260, 80);
            
            // Draw output
            ctx.fillStyle = '#2ecc71';
            ctx.fillRect(370, 50, 100, 60);
            ctx.fillStyle = 'white';
            ctx.fillText('ä¼˜åŒ–ä½å§¿', 420, 80);
            ctx.fillText('ä¼˜åŒ–æ·±åº¦', 420, 95);
            
            // Draw connections
            ctx.strokeStyle = '#7f8c8d';
            ctx.lineWidth = 2;
            
            // Input to DBA
            ctx.beginPath();
            ctx.moveTo(150, 80);
            ctx.lineTo(200, 80);
            ctx.stroke();
            drawArrowhead(ctx, 200, 80, 0);
            
            // DBA to output
            ctx.beginPath();
            ctx.moveTo(320, 80);
            ctx.lineTo(370, 80);
            ctx.stroke();
            drawArrowhead(ctx, 370, 80, 0);
            
            // Draw optimization process
            for (let i = 0; i < 3; i++) {
                const y = 150 + i * 60;
                
                // Draw camera
                ctx.fillStyle = '#3498db';
                ctx.beginPath();
                ctx.moveTo(100, y);
                ctx.lineTo(80, y - 20);
                ctx.lineTo(80, y + 20);
                ctx.closePath();
                ctx.fill();
                
                // Draw point cloud
                for (let j = 0; j < 15; j++) {
                    const px = 200 + Math.random() * 200;
                    const py = y - 50 + Math.random() * 100;
                    
                    ctx.fillStyle = '#2ecc71';
                    ctx.beginPath();
                    ctx.arc(px, py, 3, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw projection line
                    ctx.strokeStyle = 'rgba(149, 165, 166, 0.3)';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(100, y);
                    ctx.lineTo(px, py);
                    ctx.stroke();
                }
                
                // Draw iteration number
                ctx.fillStyle = 'black';
                ctx.font = '14px Arial';
                ctx.fillText(`è¿­ä»£ ${i+1}`, 50, y + 5);
            }
            
            // Draw convergence
            ctx.strokeStyle = '#9b59b6';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 3]);
            ctx.beginPath();
            ctx.moveTo(320, 150);
            ctx.lineTo(320, 270);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = '#9b59b6';
            ctx.font = '14px Arial';
            ctx.fillText('ä¼˜åŒ–æ”¶æ•›', 340, 210);
        }
        
        function renderGlobalOptimization() {
            const container = document.getElementById('global-optimization');
            container.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            container.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            
            // Draw trajectory with drift
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, canvas.height/2);
            
            for (let i = 1; i <= 10; i++) {
                const x = 50 + i * 60;
                const y = canvas.height/2 - Math.sin(i * 0.5) * 30 - i * 5;
                ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Draw loop closure connection
            ctx.strokeStyle = '#2ecc71';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(50, canvas.height/2);
            ctx.lineTo(50 + 10 * 60, canvas.height/2 - Math.sin(10 * 0.5) * 30 - 10 * 5);
            ctx.stroke();
            
            // Draw corrected trajectory
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, canvas.height/2);
            
            for (let i = 1; i <= 10; i++) {
                const x = 50 + i * 60;
                // Corrected trajectory has less drift
                const y = canvas.height/2 - Math.sin(i * 0.5) * 30;
                
                // Adjust later points based on loop closure
                const correction = i > 5 ? (10 - i) * 5 : 0;
                
                ctx.lineTo(x, y - correction);
            }
            ctx.stroke();
            
            // Draw keyframes
            for (let i = 0; i <= 10; i++) {
                const x = 50 + i * 60;
                const y = i === 0 || i === 10 ? canvas.height/2 : 
                          canvas.height/2 - Math.sin(i * 0.5) * 30 - (i > 5 ? (10 - i) * 5 : 0);
                
                ctx.fillStyle = '#9b59b6';
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = 'white';
                ctx.font = '12px Arial';
                ctx.fillText(i.toString(), x - 3, y + 4);
            }
            
            // Labels
            ctx.fillStyle = 'black';
            ctx.font = '14px Arial';
            ctx.fillText('ç´¯ç§¯è¯¯å·®è½¨è¿¹ï¼ˆæœªä¼˜åŒ–ï¼‰', 200, 50);
            ctx.fillText('å›ç¯æ£€æµ‹è¿æ¥', 350, canvas.height/2 - 70);
            ctx.fillText('å…¨å±€ä¼˜åŒ–åè½¨è¿¹', 200, canvas.height - 30);
        }
        
        // Comparison Charts
        function renderComparisonCharts() {
            // R3LIVE process chart
            const r3liveCtx = document.getElementById('r3live-chart').getContext('2d');
            new Chart(r3liveCtx, {
                type: 'bar',
                data: {
                    labels: ['IMUé¢„ç§¯åˆ†', 'LiDARå¤„ç†', 'è§†è§‰å¤„ç†', 'æ•°æ®èåˆ', 'åœ°å›¾æ„å»º'],
                    datasets: [{
                        label: 'å¤„ç†å¼ºåº¦',
                        data: [85, 75, 65, 90, 70],
                        backgroundColor: [
                            '#3498db',
                            '#3498db',
                            '#2ecc71',
                            '#9b59b6',
                            '#f1c40f'
                        ],
                        borderColor: [
                            '#2980b9',
                            '#2980b9',
                            '#27ae60',
                            '#8e44ad',
                            '#f39c12'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'R3LIVEå¤„ç†æµç¨‹'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
            
            // DROID-SLAM process chart
            const droidCtx = document.getElementById('droid-chart').getContext('2d');
            new Chart(droidCtx, {
                type: 'bar',
                data: {
                    labels: ['ç‰¹å¾æå–', 'å…‰æµè®¡ç®—', 'DBAä¼˜åŒ–', 'æ·±åº¦ä¼°è®¡', 'åœ°å›¾ç”Ÿæˆ'],
                    datasets: [{
                        label: 'å¤„ç†å¼ºåº¦',
                        data: [70, 85, 95, 80, 75],
                        backgroundColor: [
                            '#2ecc71',
                            '#9b59b6',
                            '#e74c3c',
                            '#3498db',
                            '#f1c40f'
                        ],
                        borderColor: [
                            '#27ae60',
                            '#8e44ad',
                            '#c0392b',
                            '#2980b9',
                            '#f39c12'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'DROID-SLAMå¤„ç†æµç¨‹'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }
        
        // Initial render
        renderR3LIVEVisualizations();
        renderComparisonCharts();
    </script>
</body>
</html>